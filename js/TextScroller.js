// Generated by CoffeeScript 2.5.1
var TextScroller;

TextScroller = class TextScroller {
  constructor(dx, dy, dw, dh, ts, text) {
    this.dx = dx;
    this.dy = dy;
    this.dw = dw;
    this.dh = dh;
    this.ts = ts;
    this.text = text;
    push();
    textSize(this.ts);
    this.visible = this.text !== '';
    this.sz = Math.round(textWidth(this.text));
    this.scroll = this.sz > this.dw;
    if (!this.scroll) { // scroll behövs ej
      this.doit(this.dw, this.text); // scrolla
    } else {
      this.sz = Math.round(textWidth(this.text + ' • '));
      this.doit(this.sz + this.dw + 100, this.text + ' • ' + this.text);
      this.p = 0;
    }
    pop();
  }

  doit(w, txt) {
    if (!this.draw) {
      return;
    }
    this.pg = createGraphics(w, this.dh);
    this.pg.background("green");
    this.pg.textSize(this.ts);
    this.pg.fill("black");
    this.pg.textAlign(LEFT, CENTER);
    return this.pg.text(txt, 0, this.dh / 2);
  }

  draw() {
    if (!this.visible) {
      return;
    }
    if (!this.scroll) { // scroll behövs ej
      return image(this.pg, this.dx, this.dy); // scrolla
    } else {
      image(this.pg, this.dx, this.dy, this.dw, this.dh, this.p, 0, this.dw, this.dh);
      return this.p = (this.p + 1) % this.sz;
    }
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGV4dFNjcm9sbGVyLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXFRleHRTY3JvbGxlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQU0sZUFBTixNQUFBLGFBQUE7RUFDQyxXQUFjLEdBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxNQUFBLENBQUE7SUFBQyxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFDbkMsSUFBQSxDQUFBO0lBQ0EsUUFBQSxDQUFTLElBQUMsQ0FBQSxFQUFWO0lBQ0EsSUFBQyxDQUFBLE9BQUQsR0FBVyxJQUFDLENBQUEsSUFBRCxLQUFTO0lBQ3BCLElBQUMsQ0FBQSxFQUFELEdBQU0sSUFBSSxDQUFDLEtBQUwsQ0FBVyxTQUFBLENBQVUsSUFBQyxDQUFBLElBQVgsQ0FBWDtJQUNOLElBQUMsQ0FBQSxNQUFELEdBQVUsSUFBQyxDQUFBLEVBQUQsR0FBTSxJQUFDLENBQUE7SUFDakIsSUFBRyxDQUFJLElBQUMsQ0FBQSxNQUFSO01BQ0MsSUFBQyxDQUFBLElBQUQsQ0FBTSxJQUFDLENBQUEsRUFBUCxFQUFXLElBQUMsQ0FBQSxJQUFaLEVBREQ7S0FBQSxNQUFBO01BR0MsSUFBQyxDQUFBLEVBQUQsR0FBTSxJQUFJLENBQUMsS0FBTCxDQUFXLFNBQUEsQ0FBVSxJQUFDLENBQUEsSUFBRCxHQUFRLEtBQWxCLENBQVg7TUFDTixJQUFDLENBQUEsSUFBRCxDQUFNLElBQUMsQ0FBQSxFQUFELEdBQUksSUFBQyxDQUFBLEVBQUwsR0FBUSxHQUFkLEVBQW1CLElBQUMsQ0FBQSxJQUFELEdBQVEsS0FBUixHQUFnQixJQUFDLENBQUEsSUFBcEM7TUFDQSxJQUFDLENBQUEsQ0FBRCxHQUFLLEVBTE47O0lBTUEsR0FBQSxDQUFBO0VBWmE7O0VBY2QsSUFBTyxDQUFDLENBQUQsRUFBRyxHQUFILENBQUE7SUFDTixJQUFHLENBQUksSUFBQyxDQUFBLElBQVI7QUFBa0IsYUFBbEI7O0lBQ0EsSUFBQyxDQUFBLEVBQUQsR0FBTSxjQUFBLENBQWUsQ0FBZixFQUFrQixJQUFDLENBQUEsRUFBbkI7SUFDTixJQUFDLENBQUEsRUFBRSxDQUFDLFVBQUosQ0FBZSxPQUFmO0lBQ0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxRQUFKLENBQWEsSUFBQyxDQUFBLEVBQWQ7SUFDQSxJQUFDLENBQUEsRUFBRSxDQUFDLElBQUosQ0FBUyxPQUFUO0lBQ0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxTQUFKLENBQWMsSUFBZCxFQUFtQixNQUFuQjtXQUNBLElBQUMsQ0FBQSxFQUFFLENBQUMsSUFBSixDQUFTLEdBQVQsRUFBYSxDQUFiLEVBQWUsSUFBQyxDQUFBLEVBQUQsR0FBSSxDQUFuQjtFQVBNOztFQVNQLElBQU8sQ0FBQSxDQUFBO0lBQ04sSUFBRyxDQUFJLElBQUMsQ0FBQSxPQUFSO0FBQXFCLGFBQXJCOztJQUNBLElBQUcsQ0FBSSxJQUFDLENBQUEsTUFBUjthQUNDLEtBQUEsQ0FBTSxJQUFDLENBQUEsRUFBUCxFQUFVLElBQUMsQ0FBQSxFQUFYLEVBQWMsSUFBQyxDQUFBLEVBQWYsRUFERDtLQUFBLE1BQUE7TUFHQyxLQUFBLENBQU0sSUFBQyxDQUFBLEVBQVAsRUFBVSxJQUFDLENBQUEsRUFBWCxFQUFjLElBQUMsQ0FBQSxFQUFmLEVBQWtCLElBQUMsQ0FBQSxFQUFuQixFQUFzQixJQUFDLENBQUEsRUFBdkIsRUFBMEIsSUFBQyxDQUFBLENBQTNCLEVBQTZCLENBQTdCLEVBQStCLElBQUMsQ0FBQSxFQUFoQyxFQUFtQyxJQUFDLENBQUEsRUFBcEM7YUFDQSxJQUFDLENBQUEsQ0FBRCxHQUFLLENBQUMsSUFBQyxDQUFBLENBQUQsR0FBRyxDQUFKLENBQUEsR0FBUyxJQUFDLENBQUEsR0FKaEI7O0VBRk07O0FBeEJSIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgVGV4dFNjcm9sbGVyXHJcblx0Y29uc3RydWN0b3IgOiAoQGR4LEBkeSxAZHcsQGRoLEB0cyxAdGV4dCkgLT5cclxuXHRcdHB1c2goKVxyXG5cdFx0dGV4dFNpemUgQHRzXHJcblx0XHRAdmlzaWJsZSA9IEB0ZXh0ICE9ICcnXHJcblx0XHRAc3ogPSBNYXRoLnJvdW5kIHRleHRXaWR0aCBAdGV4dFxyXG5cdFx0QHNjcm9sbCA9IEBzeiA+IEBkd1xyXG5cdFx0aWYgbm90IEBzY3JvbGwgIyBzY3JvbGwgYmVow7Z2cyBlalxyXG5cdFx0XHRAZG9pdCBAZHcsIEB0ZXh0XHJcblx0XHRlbHNlICMgc2Nyb2xsYVxyXG5cdFx0XHRAc3ogPSBNYXRoLnJvdW5kIHRleHRXaWR0aCBAdGV4dCArICcg4oCiICdcclxuXHRcdFx0QGRvaXQgQHN6K0BkdysxMDAsIEB0ZXh0ICsgJyDigKIgJyArIEB0ZXh0XHJcblx0XHRcdEBwID0gMCBcclxuXHRcdHBvcCgpIFxyXG5cclxuXHRkb2l0IDogKHcsdHh0KSAtPlxyXG5cdFx0aWYgbm90IEBkcmF3IHRoZW4gcmV0dXJuXHJcblx0XHRAcGcgPSBjcmVhdGVHcmFwaGljcyB3LCBAZGhcclxuXHRcdEBwZy5iYWNrZ3JvdW5kIFwiZ3JlZW5cIlxyXG5cdFx0QHBnLnRleHRTaXplIEB0c1xyXG5cdFx0QHBnLmZpbGwgXCJibGFja1wiXHJcblx0XHRAcGcudGV4dEFsaWduIExFRlQsQ0VOVEVSXHJcblx0XHRAcGcudGV4dCB0eHQsMCxAZGgvMlxyXG5cclxuXHRkcmF3IDogKCkgLT5cclxuXHRcdGlmIG5vdCBAdmlzaWJsZSB0aGVuIHJldHVybiBcclxuXHRcdGlmIG5vdCBAc2Nyb2xsICMgc2Nyb2xsIGJlaMO2dnMgZWpcclxuXHRcdFx0aW1hZ2UgQHBnLEBkeCxAZHlcclxuXHRcdGVsc2UgIyBzY3JvbGxhXHJcblx0XHRcdGltYWdlIEBwZyxAZHgsQGR5LEBkdyxAZGgsQHAsMCxAZHcsQGRoXHJcblx0XHRcdEBwID0gKEBwKzEpICUgQHN6XHJcbiJdfQ==
//# sourceURL=c:\github\2022-004-P5Bug\coffee\TextScroller.coffee